/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(((t="undefined"!=typeof globalThis?globalThis:t||self).TE=t.TE||{},t.TE.Rect={}))}(this,(function(t){"use strict";var n=function(t){return Array.isArray(t)},r=function(t){return"number"==typeof t},e=function(t,n){return void 0===n&&(n=!0),"object"==typeof t&&(!n||function(t,n){return t&&i(n)&&t instanceof n}(t,Object))},i=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},o=function(t){return"string"==typeof t},u=function(t){return t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},f=function t(r){if(n(r))return r.map((function(n){return t(r)}));if(e(r)){for(var i in r)r[i]=t(r[i]);return r}return!1===r?"false":null===r?"null":!0===r?"true":""+r},l=function(t){return t.replace(/[-_.](\w)/g,(function(t,n){return a(n)}))},a=function(t){return t.toUpperCase()},c=function(t,n){return void 0===n&&(n=10),n?parseInt(t,n):parseFloat(t)},d=function t(r){if(n(r))return r.map((function(n){return t(n)}));if(function(t){return/^-?(?:\d*.)?\d+$/.test(t+"")}(r))return c(r);if(e(r)){for(var i in r)r[i]=t(r[i]);return r}return"false"!==r&&("null"===r?null:"true"===r||r)},s=document,p=window,h=s.body,g=function(t,n,r){void 0===r&&(r=!0);var e=p.getComputedStyle(t).getPropertyValue(n);return r&&(e=d(e)),e||""===e||0===e?e:null},m=function(t,n){return t.removeAttribute(n),t},w=function(t,n){return t.style[l(n)]=null,t},y=function(t,n,r){return!0===r&&(r=n),t.setAttribute(n,f(r)),t},b=function(t,n,r){return t=o(t)?s.createElement(t):t,e(n)&&(r=n,n=!1),o(n)&&v(t,n),e(r)&&function(t,n){var r;for(var e in n)(r=n[e])||""===r||0===r?y(t,e,r):m(t,e)}(t,r),t},v=function(t,n,r){if(void 0===r&&(r=!0),null===n)return t;var e="innerHTML";return function(t,n){return n in t}(t,e)&&(t[e]=r?n.trim():n),t},x=function(t,n,e){return r(e)&&(e+="px"),t.style[l(n)]=f(e),t},T=function(t){return[t.offsetLeft,t.offsetTop]},j=function(t){return function(t){return t===p}(t)?[t.innerWidth,t.innerHeight]:[t.offsetWidth,t.offsetHeight]};function z(t,n="span"){return"<"+n+">"+t+"</"+n+">"}function E(t,n,e){let i=z("&zwnj;"),o=["border-bottom-width","border-left-width","border-right-width","border-top-width","box-sizing","direction","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","height","letter-spacing","line-height","max-height","max-width","min-height","min-width","padding-bottom","padding-left","padding-right","padding-top","tab-size","text-align","text-decoration","text-indent","text-transform","width","word-spacing"];v(n,z(u(t.before))+i+z(u(t.value),"mark")+i+z(u(t.after)));let f="";o.forEach((t=>{let n=g(e,t);n&&(f+=t+":"+n+";")}));let l=c(g(e,o[1]),0),a=c(g(e,o[3]),0),[d,s]=T(e),[p,m]=j(e);var b;y(n,"style",f),function(t,n){var r;for(var e in n)(r=n[e])||""===r||0===r?x(t,e,r):w(t,e)}(n,{"border-style":"solid","white-space":"pre-wrap","word-wrap":"break-word",overflow:"auto",position:"absolute",left:d,top:s,visibility:"hidden"}),b=n,h.append(b);let E=function(t,n){var e=t.children;return r(n)?e[n]||null:e||[]}(n),A=E[1],H=E[2],k=E[3],C=T(A),L=j(A),W=T(H),$=j(H),F=T(k),I=j(k);return[{h:L[1],w:0,x:C[0]+d+l,y:C[1]+s+a},{h:I[1],w:0,x:F[0]+d+l,y:F[1]+s+a},{h:$[1],w:W[0],x:W[0]+d+l,y:W[1]+s+a},{h:m,w:p,x:d,y:s}]}const A={mirror:null,rect:function(t){let n=this;n.mirror||(n.mirror=b("div"));let r=E(n.$(),n.mirror,n.self);return i(t)?[r[0][t],r[1][t],r[2][t],r[3][t]]:r}};t.that=A}));