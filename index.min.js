/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2024 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):((t="undefined"!=typeof globalThis?globalThis:t||self).TextEditor=t.TextEditor||{},t.TextEditor.Rect=n())}(this,(function(){"use strict";var t=function(t){return Array.isArray(t)},n=function(t){return"number"==typeof t},r=function(t,n){return void 0===n&&(n=!0),"object"==typeof t&&(!n||function(t,n){return t&&e(n)&&t instanceof n}(t,Object))},e=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},i=function(t){return"string"==typeof t},o=function(t){return t.replace(/[-_.](\w)/g,(function(t,n){return u(n)}))},u=function(t){return t.toUpperCase()},f=function(t,n){return void 0===n&&(n=10),n?parseInt(t,n):parseFloat(t)},c=function n(e){if(t(e))return e.map((function(t){return n(t)}));if(function(t){return/^-?(?:\d*.)?\d+$/.test(t+"")}(e))return f(e);if(r(e)){for(var i in e)e[i]=n(e[i]);return e}return"false"!==e&&("null"===e?null:"true"===e||e)},a=function(t,n){return t=t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},d=function n(e){if(t(e))return e.map((function(t){return n(e)}));if(r(e)){for(var i in e)e[i]=n(e[i]);return e}return!1===e?"false":null===e?"null":!0===e?"true":""+e},l=document,s=window,p=l.body,h=function(t,r){var e=[].slice.call(t.children);return n(r)?e[r]||null:e},v=function(t,n,r){void 0===r&&(r=!0);var e=s.getComputedStyle(t).getPropertyValue(n);return r&&(e=c(e)),e||""===e||0===e?e:null},g=function(t,n){return t.removeAttribute(n),t},y=function(t,n){return t.style[o(n)]=null,t},m=function(t,n,r){return!0===r&&(r=n),t.setAttribute(n,d(r)),t},b=function(t,n){return t.append(n),n},w=function(t,n,e){return t=i(t)?l.createElement(t):t,r(n)&&(e=n,n=!1),i(n)&&x(t,n),r(e)&&function(t,n){var r;for(var e in n)(r=n[e])||""===r||0===r?m(t,e,r):g(t,e)}(t,e),t},x=function(t,n,r){if(void 0===r&&(r=!0),null===n)return t;var e="innerHTML";return function(t,n){return n in t}(t,e)&&(t[e]=r?n.trim():n),t},T=function(t,r,e){return n(e)&&(e+="px"),t.style[o(r)]=d(e),t},j=function(t,n){var r;for(var e in n)(r=n[e])||""===r||0===r?T(t,e,r):y(t,e);return t},E=function(t){return[t.offsetLeft,t.offsetTop]},z=function(t){return function(t){return t===s}(t)?[t.innerWidth,t.innerHeight]:[t.offsetWidth,t.offsetHeight]};function A(t,n){return void 0===n&&(n="span"),"<"+n+">"+t+"</"+n+">"}function H(t){var n=this,r=n.constructor.prototype;return n.mirror=w("div"),"function"!=typeof r.rect&&(r.rect=function(t){var n=this,r=function(t,n,r){var e=A("&zwnj;"),i=["border-bottom-width","border-left-width","border-right-width","border-top-width","box-sizing","direction","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","height","letter-spacing","line-height","max-height","max-width","min-height","min-width","padding-bottom","padding-left","padding-right","padding-top","tab-size","text-align","text-decoration","text-indent","text-transform","width","word-spacing"];x(n,A(a(t.before))+e+A(a(t.value),"mark")+e+A(a(t.after)));var o="";i.forEach((function(t){var n=v(r,t);n&&(o+=t+":"+n+";")}));var u=f(v(r,i[1]),0),c=f(v(r,i[3]),0),d=E(r),l=d[0],s=d[1],g=z(r),y=g[0],w=g[1],T=r.scrollLeft,H=r.scrollTop;m(n,"style",o),j(n,{"border-style":"solid","white-space":"pre-wrap","word-wrap":"break-word",overflow:"hidden",position:"absolute",left:l,top:s,visibility:"hidden"}),b(p,n);var L=h(n),k=L[1],C=L[2],O=L[3],P=E(k),R=z(k),W=E(C),$=z(C),F=E(O),I=z(O);return[{h:R[1],w:0,x:P[0]+l+u-T,y:P[1]+s+c-H},{h:I[1],w:0,x:F[0]+l+u-T,y:F[1]+s+c-H},{h:$[1],w:$[0],x:W[0]+l+u-T,y:W[1]+s+c-H},{h:w,w:y,x:l,y:s}]}(n.$(),n.mirror,n.self);return e(t)?[r[0][t],r[1][t],r[2][t],r[3][t]]:r}),n}return Object.defineProperty(H,"name",{value:"TextEditor.Rect"}),H}));